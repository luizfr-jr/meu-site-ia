{% extends 'base.html' %}

{% block title %}Home Inteligente - Meu Site IA{% endblock %}

{% block content %}
<style>
  /* Animations */
  @keyframes fadeIn { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: translateY(0);} }
  .fade-in { animation: fadeIn 0.8s ease-out both; }
  /* Card hover effect */
  .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
  .card-hover:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
  /* Section headings */
  .section-title { font-size: 1.75rem; margin-bottom: 1rem; display: flex; align-items: center; }
  .section-title i { margin-right: 0.5rem; color: var(--primary); }
  /* Hero */
  .hero { background: linear-gradient(135deg, #007bff 0%, #00bfff 100%); color: #fff; border-radius: 0.5rem; }
  .hero .btn { min-width: 150px; }
</style>

<!-- Hero Section -->
<section class="hero text-center text-white py-5 mb-5 fade-in">
  <div class="container">
    <h1 class="display-4 fw-bold"><i class="fas fa-rocket"></i> Comece sua jornada em IA!</h1>
    <p class="lead mb-4">Explore, aprenda e transforme sua rotina com ferramentas educacionais de Intelig√™ncia Artificial.</p>
    <a href="{{ url_for('forum') }}" class="btn btn-lg btn-light me-2">üí¨ Entrar no F√≥rum</a>
    <a href="{{ url_for('login_usuario') }}" class="btn btn-lg btn-outline-light">üîë Cadastrar / Entrar</a>
  </div>
</section>

<div class="container">
  <!-- IA Mais Usada da Semana -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-fire"></i> IA Mais Usada da Semana</h2>
    <div class="card card-hover shadow-sm p-4">
      <div class="d-flex align-items-start">
        <div class="flex-grow-1">
          <h3 class="fw-semibold">{{ ia_mais_usada.nome }} <span class="badge bg-info ms-2">+ Recomendado</span></h3>
          <p class="text-muted">{{ ia_mais_usada.descricao }}</p>
          {% if ia_mais_usada.acessos_semana %}
            <small class="text-muted">Acessos nesta semana: {{ ia_mais_usada.acessos_semana }}</small>
          {% endif %}
        </div>
        <div>
          <a href="{{ ia_mais_usada.link }}" class="btn btn-primary btn-lg">Testar Agora</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Recomenda√ß√£o Inteligente -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-bullseye"></i> Recomenda√ß√£o Inteligente</h2>
    <div class="card card-hover shadow-sm p-4">
      <div class="d-flex align-items-start">
        <div class="flex-grow-1">
          <h3 class="fw-semibold">{{ ia_recomendada.nome }}</h3>
          <p class="text-muted">{{ ia_recomendada.descricao }}</p>
        </div>
        <div>
          <a href="{{ ia_recomendada.link }}" class="btn btn-success btn-lg">Experimente</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Top 5 Ferramentas -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-trophy"></i> Top 5 Ferramentas Mais Acessadas</h2>
    <div class="row g-3">
      {% for ia in top_5 %}
      <div class="col-md-6 col-lg-4">
        <div class="card card-hover h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">{{ loop.index }}. {{ ia.nome }}</h5>
            <p class="card-text text-truncate">{{ ia.descricao }}</p>
          </div>
          <div class="card-footer bg-transparent border-top d-flex justify-content-between align-items-center">
            <span class="badge bg-primary">{{ ia.acessos_totais or 0 }} cliques</span>
            <a href="{{ url_for('acessar_ferramenta', ferramenta_id=ia.id) }}" class="btn btn-sm btn-outline-primary">Acessar</a>
          </div>
        </div>
      </div>
      {% else %}
      <p class="text-muted">Nenhuma ferramenta dispon√≠vel.</p>
      {% endfor %}
    </div>
  </section>

  <!-- Ferramenta Aleat√≥ria -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-dice"></i> Me Surpreenda!</h2>
    <div class="card card-hover shadow-sm p-4 text-center">
      <h3 class="fw-semibold">{{ ia_aleatoria.nome }}</h3>
      <p class="text-muted">{{ ia_aleatoria.descricao }}</p>
      <a href="{{ ia_aleatoria.link }}" class="btn btn-warning btn-lg">Tentar Agora</a>
    </div>
  </section>

  <!-- Comunidade Ativa -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-users"></i> Comunidade Ativa</h2>
    <div class="row">
      <div class="col-md-6 mb-4">
        <div class="card card-hover h-100 shadow-sm">
          <div class="card-header bg-transparent">
            <h5><i class="fas fa-comments"></i> √öltimos T√≥picos</h5>
          </div>
          <ul class="list-group list-group-flush">
            {% for t in topicos_recentes[:5] %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <a href="{{ url_for('ver_topico', id=t.id) }}" class="text-decoration-none text-truncate" style="max-width:70%;">{{ t.titulo }}</a>
              <small class="text-muted">{{ t.data_criacao.strftime('%d/%m') }}</small>
            </li>
            {% else %}
            <li class="list-group-item text-muted">Nenhum t√≥pico recente.</li>
            {% endfor %}
          </ul>
          <div class="card-footer bg-transparent border-top text-center">
            <a href="{{ url_for('forum') }}" class="btn btn-outline-primary">Entrar no F√≥rum</a>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-4">
        <div class="card card-hover h-100 shadow-sm">
          <div class="card-header bg-transparent">
            <h5><i class="fas fa-medal"></i> Usu√°rios em Destaque</h5>
          </div>
          <ul class="list-group list-group-flush">
            {% for u in ranking[:5] %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center">
                <i class="fas fa-user-circle fa-2x me-2 text-secondary"></i>
                <a href="{{ url_for('perfil_publico', id=u.id) }}" class="fw-semibold text-decoration-none">{{ u.nome }}</a>
              </div>
              <span class="badge bg-success">{{ u.pontos }} pts</span>
            </li>
            {% else %}
            <li class="list-group-item text-muted">Nenhum usu√°rio em destaque.</li>
            {% endfor %}
          </ul>
          <div class="card-footer bg-transparent border-top text-center">
            <a href="{{ url_for('ranking') }}" class="btn btn-outline-success">Ver Ranking Completo</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Not√≠cia do Dia -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-newspaper"></i> Not√≠cia do Dia</h2>
    {% if noticia %}
    <div class="card card-hover shadow-sm">
      {% if noticia.image %}
      <img src="{{ noticia.image }}" alt="Imagem da not√≠cia" class="card-img-top rounded-top" style="object-fit:cover; height:250px;">
      {% endif %}
      <div class="card-body">
        <h4>{{ noticia.title }}</h4>
        <p class="text-muted">{{ noticia.description }}</p>
        <a href="{{ noticia.url }}" target="_blank" class="btn btn-outline-primary">Ler na √≠ntegra</a>
      </div>
      <div class="card-footer bg-transparent text-muted">
        Fonte: {{ noticia.source }}
      </div>
    </div>
    {% else %}
    <div class="alert alert-warning text-center">Nenhuma not√≠cia dispon√≠vel no momento.</div>
    {% endif %}
  </section>

  <!-- Dica da Semana -->
  <section class="mb-5 fade-in">
    <h2 class="section-title"><i class="fas fa-lightbulb"></i> Dica da Semana</h2>
    <div class="alert alert-info fs-5">{{ dica }}</div>
  </section>
</div>

{% endblock %}
